<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>TaskMaster</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
      :root {
        /* --- Primary Brand Colors --- */
        --color-primary-500: #6D55A6; /* A deep, sophisticated violet for primary actions */
        --color-primary-200: #DCD6EA; /* A light lavender for backgrounds and tags */
        --color-primary-100: #F3F1F8; /* A very light tint for hover states or subtle backgrounds */

        /* --- Neutral Colors for UI --- */
        --color-background-primary: #F9F9FC; /* Off-white for the main app background */
        --color-surface-container: #FFFFFF; /* Pure white for cards, pop-ups, and surfaces */
        --color-surface-container-high: #FFFFFF; /* For elements that need to appear elevated, like modals */
        --color-surface-container-low: #F0F0F5; /* For secondary elements like disabled inputs */

        /* --- Text & Icon Colors --- */
        --color-text-primary: #1A1A1A;    /* For main titles and body text */
        --color-text-secondary: #6B6B6B; /* For subtitles, descriptions, and placeholder text */
        --color-text-tertiary: #A0A0A0;  /* For disabled text and less important info */
        --color-on-primary: #FFFFFF;     /* Text/icons on a --color-primary-500 background */

        /* --- Functional Colors --- */
        --color-functional-red: #D9534F;   /* For high-priority flags or destructive actions */
        --color-functional-gray: #B0B0B0;  /* For low-priority flags */

        /* --- Borders & Dividers --- */
        --color-border: #EAEAEF;

        /* --- Font Families --- */
        --font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
        --font-family-chinese: 'PingFang SC', 'Source Han Sans', 'Noto Sans CJK', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;

        /* --- Font Sizes --- */
        --font-size-h1: 28px;
        --font-size-h2: 22px;
        --font-size-title: 17px;
        --font-size-body: 15px;
        --font-size-caption: 13px;
        --font-size-small: 11px;

        /* --- Font Weights --- */
        --font-weight-regular: 400;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        
        /* --- Spacing Units --- */
        --space-xs: 4px;
        --space-sm: 8px;
        --space-md: 16px;
        --space-lg: 24px;
        --space-xl: 32px;

        /* --- Border Radius --- */
        --border-radius-sm: 6px;
        --border-radius-md: 12px;
        --border-radius-lg: 18px;
        --border-radius-full: 999px;

        /* --- Shadows --- */
        --shadow-subtle: 0 2px 8px rgba(0, 0, 0, 0.05);
        --shadow-pop: 0 6px 20px rgba(0, 0, 0, 0.1);
      }
      
      html {
        font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11'; /* For better readability of numbers and characters */
      }

      body {
        font-family: var(--font-family-sans), var(--font-family-chinese);
        color: var(--color-text-primary);
        background-color: var(--color-background-primary);
      }

      @keyframes page-fade-in-animation {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-page-fade-in {
        animation: page-fade-in-animation 0.3s ease-out forwards;
      }
      @keyframes card-fade-in-animation {
        from {
            opacity: 0;
            transform: scale(0.95) translateY(10px);
        }
        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
      }
      .animate-card-fade-in {
        animation: card-fade-in-animation 0.5s ease-out forwards;
        opacity: 0;
      }
       @keyframes card-fade-out {
          from {
              opacity: 1;
              transform: scale(1) translateX(0);
          }
          to {
              opacity: 0;
              transform: scale(0.95) translateX(-16px);
          }
      }
      .animate-card-fade-out {
          animation: card-fade-out 0.3s ease-out forwards;
          animation-delay: 0.3s;
      }
      @keyframes checkmark-animation {
        0% {
          transform: scale(1);
          background-color: transparent;
          border-color: #9ca3af; /* gray-400 */
        }
        20% {
          transform: scale(1.2);
          background-color: transparent;
          border-color: var(--color-primary-500);
        }
        50% {
          transform: scale(1.1);
          background-color: var(--color-primary-500);
          border-color: var(--color-primary-500);
        }
        100% {
          transform: scale(1);
          background-color: var(--color-primary-500);
          border-color: var(--color-primary-500);
        }
      }
      .animate-checkmark {
        animation: checkmark-animation 0.3s ease-out forwards;
      }
      @keyframes checkmark-icon-fade-in {
        from { opacity: 0; transform: scale(0.5); }
        to { opacity: 1; transform: scale(1); }
      }
      .animate-checkmark-icon {
          animation: checkmark-icon-fade-in 0.2s 0.1s ease-out forwards;
          opacity: 0;
      }
      @keyframes uncheck-animation {
        0% {
          transform: scale(1);
          background-color: var(--color-primary-500);
          border-color: var(--color-primary-500);
        }
        50% {
          transform: scale(0.8);
          background-color: transparent;
        }
        100% {
          transform: scale(1);
          background-color: transparent;
          border-color: #9ca3af;
        }
      }
      .animate-uncheck {
        animation: uncheck-animation 0.3s ease-out forwards;
      }
      @keyframes firework-fly-out {
        0% {
          transform: translateX(5px) scale(0.5);
          opacity: 1;
        }
        100% {
          transform: translateX(25px) scale(2);
          opacity: 0;
        }
      }
      .fireworks-container {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }
      .fireworks-container > .rotator {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .fireworks-container .particle {
        width: 5px;
        height: 2px;
        border-radius: 2px;
        opacity: 0; /* Start hidden until animation begins */
        transform: translateX(5px) scale(0.5);
        animation: firework-fly-out 0.6s ease-out forwards;
      }
      .particle-blue { background-color: var(--color-primary-500); }
      .particle-pink { background-color: #ec4899; }
      .particle-yellow { background-color: #f59e0b; }
      .particle-green { background-color: #10b981; }
       @keyframes ios-spinner-rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes ios-spinner-stroke {
        0% {
          stroke-dasharray: 1, 125;
          stroke-dashoffset: 0;
        }
        50% {
          stroke-dasharray: 100, 125;
          stroke-dashoffset: -25px;
        }
        100% {
          stroke-dasharray: 100, 125;
          stroke-dashoffset: -125px;
        }
      }
      .animate-ios-spinner {
        animation: ios-spinner-rotate 1.5s linear infinite;
      }
      .animate-ios-spinner-path {
        stroke-linecap: round;
        animation: ios-spinner-stroke 1.5s ease-in-out infinite;
      }
      @keyframes pulse-quick-animation {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.02); }
      }
      .animate-pulse-quick {
        animation: pulse-quick-animation 0.3s ease-out;
      }
      .card-shadow {
        box-shadow: var(--shadow-subtle);
      }
      .modal-shadow {
        box-shadow: var(--shadow-pop);
      }
      .fab-shadow {
        box-shadow: 0 8px 24px hsla(259, 36%, 50%, 0.25);
      }

      /* Font Size Control */
      /* This fallback is useful before JS loads */
      html { font-size: 16px; } 
      html.font-size-sm { font-size: 12px; }
      html.font-size-md { font-size: 14px; }
      html.font-size-lg { font-size: 16px; } /* Default */
      html.font-size-xl { font-size: 18px; }
    </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.22.0",
    "@supabase/supabase-js": "https://aistudiocdn.com/@supabase/supabase-js@^2.74.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@^7.9.3",
    "@capacitor/core": "https://aistudiocdn.com/@capacitor/core@^7.4.3",
    "@capacitor/camera": "https://aistudiocdn.com/@capacitor/camera@^7.0.2"
  }
}
</script>
</head>
  <body class="h-full">
    <div id="root" class="h-full"></div>
    <script src="https://unpkg.com/@capacitor/pwa-elements@latest/dist/pwa-elements.js"></script>
    <script src="capacitor.js"></script>
    <script type="module" src="/index.js"></script>
  </body>
</html>